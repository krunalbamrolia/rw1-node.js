<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Dashbord</title>

    <!-- all link here -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/style.css">

</head>

<body class="bg-info">

    <!-- Modal Movie add -->
    <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded overflow-hidden">
                <div class="modal-body p-0 position-relative">
                    <div class="col-12 d-flex bg-success">           
                        <div class="col p-4 pb-0">

                            <form enctype="multipart/form-data" method="post" action="/addMovie">
                                <div class="col-12">
                                    <input type="text" placeholder="Movie Name..." name="moviename" class="ho-input" required>
                                </div>

                                <div class="col-12 d-flex">
                                    <div class="col-12 mt-3 ps-2">
                                        <label for="catagary" class="mb-2 text-white">Catagary:</label>
                                        <select class="form-select form-select" name="catagary"
                                            aria-label="Default select example">
                                            <option aria-required="true">Select Catagary</option>
                                            <option value="Action">Action</option>
                                            <option value="Horror">Horror</option>
                                            <option value="Animation">Animation</option>
                                            <option value="Aventure">Aventure</option>
                                            <option value="Crime">Crime</option>
                                            <option value="Science-Fiction">Science-Fiction</option>
                                            <option value="Thriller">Thriller</option>
                                            <option value="Drama">Drama</option>
                                            <option value="Romance" selected>Romance</option>
                                            <option value="War">War</option>
                                            <option value="Mystery">Mystery</option>
                                            <option value="Spy">Spy</option>
                                            <option value="Documentary">Documentary</option>
                                            <option value="Superhero">Superhero</option>
                                            <option value="Biographical">Biographical</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-12 mt-3">
                                    <label class="mb-2 text-white">Languages:</label>
                                    <div class="d-flex" style="column-gap: 15px;">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Hindi" name="languages" id="Hindi">
                                            <label class="form-check-label text-white" for="Hindi text-white">Hindi</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="English" name="languages" id="English">
                                            <label class="form-check-label text-white" for="English">English</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Gujarati" name="languages" id="Gujarati">
                                            <label class="form-check-label text-white" for="Gujarati">Gujarati</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Tamil" name="languages" id="Tamil">
                                            <label class="form-check-label text-white" for="Tamil">Tamil</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Malyalam" name="languages" id="Malyalam">
                                            <label class="form-check-label text-white" for="Malyalam">Malyalam</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-3">
                                    <label for="" class="mb-2 text-white">Description:</label>
                                    <textarea class="text-white" rows="3" placeholder="Enter Movie Description..." name="description" required></textarea>
                                </div>

                                <div class="col-12 d-flex justify-content-between">

                                    <div class="mt-2 col-8 pe-2">
                                        <label for="profileImg" class="form-label text-white">Choose Movie Poster</label>
                                        <input class="form-control" type="file" name="banner" required>
                                    </div>

                                    <div class="col-4 mt-2 ps-2">

                                        <label for="rate" class="mb-2 text-white">Ratting:</label>
                                        <select class="form-select form-select" name="rate"
                                            aria-label="Default select example">
                                            <option>Select Rate</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3" selected>3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                        </select>

                                    </div>

                                </div>
                                <div class="col-12">
                                    <button type="submit" style="background: linear-gradient(93.87deg,#095ae6,#062794);" class="col-12 btn btn-primary mt-4 mb-3">Add Movie</button>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- movie control like pop -->
    <% movies.forEach((movie)=> { %>
        <div class="modal fade" id="exampleModal<%= movie.id %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body position-relative" style="height: 520px;">
                        <a href="#" class="position-absolute end-0 fw-light px-3 pt-2 fs-4" style="z-index: 33;"
                            data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></a>
                        <div class="col-12 h-100 position-relative rounded overflow-hidden">
                            <div class="overlay p-5 d-flex align-items-end text-white">
                                <div class="col-12 d-flex">
                                    <div class="col-8 h-100">
                                        <h1>
                                            <%= movie.moviename %>
                                        </h1>
                                        <p class="mb-2" style="font-size: 18px;">
                                            <%= movie.languages %>
                                        </p>
                                        <div class="col-9">
                                            <p class="col-12">
                                                <%= movie.description %>
                                            </p>
                                            <p style="font-size: 18px;">
                                                <span class="pe-2">
                                                    Catagary: &nbsp;<%= movie.catagary %>
                                                </span>
                                                |
                                                <span class="ps-2">Ratting: &nbsp;
                                                    <% for (let i = 1; i <= 5; i++) { %>
                                                        <% if (i <= movie.rate) { %>
                                                            <span><i class="fa-solid fa-star text-warning fs-7"></i></span>
                                                        <% } else { %>
                                                            <span><i class="fa-regular fa-star fs-7"></i></span>
                                                        <% } %>
                                                    <% } %>
                                                </span>
                                            </p>
                                        </div>

                                        <div class="col-12 d-flex">
                                            <a href="/editMovie/<%= movie.id %>" style="color: rgb(0, 0, 0) !important;"
                                                class="btn btn-movie bg-light dark-hover rounded px-3 py-1">Edit</a>
                                            <a href="/deleteMovie/<%= movie.id %>"
                                                style="color: rgb(0, 0, 0) !important;"
                                                class="btn btn-movie bg-light dark-hover rounded px-3 py-1 ms-4">Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <img src="<%= movie.banner %>" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <% }) %>

        <!-- Add Movie Button -->
        <div class="position-absolute top-0 end-0 p-3">
            <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal2" class="btn btn-primary">Add Movie</a>
        </div>  
            <div class="col-12 d-flex flex-column row-gap-3 mt-4">
                <section class="mt-3">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12">
                                <div class="col-12">
                                    <span style="font-weight: 500; font-size: 20px; color: #e1e6f0;">You Add Movie Here</span>
                                </div>
                                <div class="col-12 mt-1 d-flex flex-wrap column-gap-4 row-gap-3">
                                    <% movies.forEach((movie)=> { %>
                                        <div class="addmovies position-relative col-12">
                                            <img src="<%= movie.banner %>" alt="<%= movie.name %>">
                                            <div class="overflow">
                                                <div class="sub-movie-box d-flex justify-content-center align-items-center">
                                                    <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal<%= movie.id %>" class="tran-5" style="font-size: 24px;"><i><%= movie.moviename %></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    <% }) %>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
    </body>
            <script src="js/bootstrap.bundle.min.js"></script>
</html>